\chapter{Linearity inference of karatsuba multiplication}
\label{cha:line-infer-karats}

\lstset{language=haskell}

We show here an example of inference of linearity in Haskell, using
the technique described in Section~\ref{sec:inference}. We define type
classes \lstinline{Ring} and \lstinline{Module} to represent
left-linear operations on rings and free modules. We instantiate them
with integers as base ring, and lists of integers as free module
(representing polynomials over $\Z[X]$).

We implement Karatsuba multiplication over $\Z[X]$, using only the
methods defined in \lstinline{Ring} and \lstinline{Module}. This
allows the type checker to deduce that Karatsuba multiplication is
linear in its first argument, once the second argument and the degree
of the polynomials are fixed. The code makes use of functional
dependencies, it must be run with the switch \verb|-fglasgow-exts| on.

\begin{xcomment}{lstlisting}
\input{trans/haskatsuba.hs}
\end{xcomment}


                  

% Local Variables:
% mode:flyspell
% ispell-local-dictionary:"american"
% mode:TeX-PDF
% mode:reftex
% TeX-master: "../these"
% End:
%
